---
import { CallToAction } from "@/sections/CallToAction";
import { FeaturesCards } from "@/sections/FeaturesCards";
import { FeaturesGridSection } from "@/sections/FeaturesGrid";
import { Footer } from "@/sections/Footer";
import { HeaderSection } from "@/sections/Header";
import { HeroSection } from "@/sections/Hero";
import { LatestPosts } from "@/sections/LatestPosts";
import { Testimonials } from "@/sections/Testimonials";
import { getCollection } from "astro:content";
import DefaultLayout from "../layouts/Default.astro";

const latestPosts = await getCollection('blog').then(posts =>
  posts
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
    .slice(0, 4)
);
---



<DefaultLayout>
  <HeaderSection client:load/>
  <HeroSection client:load/>
  <FeaturesCards client:load />
  <FeaturesGridSection client:load/>
  <LatestPosts latestPosts={latestPosts} client:load/>
  <Testimonials client:load/>
  <CallToAction client:load/>
  <Footer />
</DefaultLayout>
